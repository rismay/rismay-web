(function (root) {

  var WrkstrmLogo = root.WrkstrmLogo = (root.WrkstrmLogo || {});

  var Logo = WrkstrmLogo.Logo = function (svg_element) {
    this.svg = d3.select(svg_element);
    this.$svg = $(svg_element)[0];

    this.radius = 73;
    this.colors = [
      ColorPalette.color(ColorPalette.Gradient.GREEN, 1, 1, false),
      ColorPalette.color(ColorPalette.Gradient.BLUE, 1, 1, false)
    ]

    this.leftCircleX = 78;
    this.rightCircleX = 202;

    this.svg.append("circle").attr({ class: "logo", cx: this.leftCircleX,
      cy: 82, r: this.radius, fill: this.colors[0]
    });

    this.svg.append("circle").attr({ class: "logo", cx: this.rightCircleX,
      cy: 82, r: this.radius, fill: this.colors[1]
    });

    //w
    this.svg.append("path") .attr({ class: "logo",
      d:"M 71.89 62.38 L 59.25 102.39 L 59.09 102.39 L 46.29 62.38 L 43.78 62.38 L 30.9 102.39 L 30.74 102.39 L 18.35 62.38 L 16.81 62.38 L 29.69 104.01 L 31.95 104.01 L 45 64 L 45.16 64 L 58.12 104.01 L 60.22 104.01 L 73.51 62.38 L 71.89 62.38",
    });

    //r
    this.svg.append("path").attr({ class: "logo",
      d: "M 78.94 104.01 L 78.94 80.44 C 78.94 78.17 79.26 75.96 79.91 73.8 C 80.56 71.64 81.55 69.73 82.9 68.09 C 84.25 66.44 85.97 65.14 88.05 64.2 C 90.13 63.25 92.6 62.86 95.46 63.02 L 95.46 61.4 C 92.97 61.35 90.8 61.62 88.94 62.21 C 87.08 62.81 85.47 63.62 84.12 64.64 C 82.77 65.67 81.69 66.87 80.88 68.25 C 80.07 69.62 79.48 71.1 79.1 72.66 L 78.94 72.66 L 78.94 62.38 L 77.31 62.38 L 77.31 104.01 L 78.94 104.01",
    });

    //k
    this.svg.append("path").attr({ class: "logo",
      d: "M 99.91 88.3 L 110.69 79.39 L 130.21 104.01 L 132.39 104.01 L 111.9 78.25 L 131.02 62.38 L 128.67 62.38 L 99.91 86.27 L 99.91 46.17 L 98.29 46.17 L 98.29 104.01 L 99.91 104.01 L 99.91 88.3",
    });

    //s
    this.svg.append("path").attr({ class: "logo",
      d: "M 176.22 64 M 192.9 104.01 L 192.9 80.44 C 192.9 78.17 193.23 75.96 193.87 73.8 C 194.52 71.64 195.52 69.73 196.87 68.09 C 198.22 66.44 199.94 65.14 202.01 64.2 C 204.09 63.25 206.56 62.86 209.43 63.02 L 209.43 61.4 C 206.94 61.35 204.77 61.62 202.91 62.21 C 201.04 62.81 199.44 63.62 198.09 64.64 C 196.74 65.67 195.66 66.87 194.85 68.25 C 194.04 69.62 193.44 71.1 193.06 72.66 L 192.9 72.66 L 192.9 62.38 L 191.28 62.38 L 191.28 104.01 L 192.9 104.01",
    });

    //t
    this.svg.append("path").attr({ class: "logo",
      d: "M 176.22 64 L 185.61 64 L 185.61 62.38 L 176.22 62.38 L 176.22 49.25 L 174.6 49.25 L 174.6 62.38 L 166.98 62.38 L 166.98 64 L 174.6 64 L 174.6 96.23 C 174.6 99.2 175.26 101.24 176.58 102.35 C 177.9 103.46 179.51 104.01 181.4 104.01 C 182.64 104.01 183.49 103.98 183.95 103.93 C 184.41 103.87 184.88 103.82 185.37 103.77 L 185.37 102.15 C 185.1 102.25 184.64 102.32 183.99 102.35 C 183.34 102.38 182.62 102.39 181.81 102.39 C 181.16 102.39 180.51 102.35 179.86 102.27 C 179.21 102.19 178.62 101.93 178.08 101.5 C 177.54 101.07 177.09 100.42 176.74 99.55 C 176.39 98.69 176.22 97.48 176.22 95.91 L 176.22 64",
    });

    //r
    this.svg.append("path").attr({ class: "logo",
      d: "M 161.39 74.69 L 163.01 74.69 C 163.01 70.04 161.66 66.67 158.96 64.56 C 156.26 62.46 152.59 61.4 147.95 61.4 C 145.35 61.4 143.17 61.73 141.39 62.38 C 139.6 63.02 138.15 63.86 137.01 64.89 C 135.88 65.91 135.07 67.05 134.58 68.29 C 134.1 69.53 133.85 70.72 133.85 71.85 C 133.85 74.12 134.26 75.93 135.07 77.28 C 135.88 78.63 137.15 79.68 138.88 80.44 C 140.06 80.98 141.41 81.46 142.93 81.9 C 144.44 82.33 146.19 82.79 148.19 83.27 C 149.97 83.7 151.73 84.14 153.46 84.57 C 155.18 85 156.71 85.58 158.03 86.31 C 159.35 87.04 160.43 87.97 161.27 89.11 C 162.11 90.24 162.53 91.72 162.53 93.56 C 162.53 95.34 162.11 96.85 161.27 98.1 C 160.43 99.34 159.37 100.35 158.07 101.13 C 156.78 101.92 155.33 102.48 153.74 102.83 C 152.15 103.19 150.59 103.36 149.08 103.36 C 144.17 103.36 140.4 102.27 137.78 100.08 C 135.16 97.89 133.85 94.45 133.85 89.75 L 132.23 89.75 C 132.23 94.99 133.65 98.82 136.49 101.26 C 139.32 103.69 143.52 104.9 149.08 104.9 C 150.86 104.9 152.66 104.7 154.47 104.29 C 156.28 103.89 157.9 103.23 159.33 102.31 C 160.76 101.39 161.92 100.2 162.81 98.74 C 163.7 97.29 164.15 95.5 164.15 93.4 C 164.15 91.4 163.76 89.78 162.97 88.54 C 162.19 87.3 161.16 86.27 159.89 85.46 C 158.63 84.65 157.19 84.02 155.6 83.56 C 154.01 83.1 152.4 82.65 150.78 82.22 C 148.51 81.63 146.53 81.11 144.83 80.68 C 143.13 80.25 141.55 79.74 140.09 79.14 C 138.69 78.55 137.57 77.7 136.73 76.59 C 135.89 75.48 135.47 73.9 135.47 71.85 C 135.47 71.47 135.58 70.8 135.8 69.83 C 136.01 68.85 136.53 67.87 137.34 66.87 C 138.15 65.87 139.39 64.98 141.06 64.2 C 142.74 63.41 145.03 63.02 147.95 63.02 C 149.95 63.02 151.77 63.24 153.41 63.67 C 155.06 64.1 156.48 64.79 157.67 65.74 C 158.86 66.68 159.77 67.88 160.42 69.34 C 161.07 70.8 161.39 72.58 161.39 74.69",
    });

    //m
    this.svg.append("path").attr({ class: "logo",
      d: "M 176.22 64 M 256.39 104.01 L 243.75 64 L 243.59 64 L 230.79 104.01 L 228.28 104.01 L 215.4 64 L 215.24 64 L 202.85 104.01 L 201.31 104.01 L 214.19 62.38 L 216.46 62.38 L 229.5 102.39 L 229.66 102.39 L 242.62 62.38 L 244.72 62.38 L 258.01 104.01 L 256.39 104.01",
    });

    this.scale();
  }

  Logo.prototype.scale = function scale() {
    this.svgWidth = this.$svg.getBoundingClientRect().width;
    this.scaleFactor = this.svgWidth / (this.radius + this.rightCircleX + 5);
    this.svg.attr("height", 175 * this.scaleFactor);
    d3.selectAll(".logo").attr("transform", "scale( "+ this.scaleFactor + ")");
  }

  Logo.prototype.dynamic = function () {
    d3.select(window).on('resize', this.scale.bind(this));
    return this;
  }

  Logo.prototype.pulse = function () {
    var that = this;
    var svg = d3.selectAll("circle").each(repeat);

    function repeat() {
      d3.select(this)
      .transition()
      .duration(2250)
      .attr("r", that.radius * 1.02)
      .transition()
      .attr("r", that.radius * 0.98)
      .ease('sine')
      .each("end", repeat);
    }

    return this;
  }

}(this));
